<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Device Setup Guide</title>
<style>
  :root {
    --bg: #0d1117;
    --card: #161b22;
    --text: #e6edf3;
    --accent: #2f81f7;
    --accent-2: #58a6ff;
    --radius: 12px;
  }
  body {
    background: var(--bg);
    color: var(--text);
    font-family: "Segoe UI", sans-serif;
    margin: 0;
    padding: 0;
    user-select: none;
  }
  a { color: var(--accent-2); text-decoration: none; }
  a:hover { text-decoration: underline; }
  header {
    text-align: center;
    padding: 20px;
    border-bottom: 1px solid #30363d;
  }
  .logo {
    display: inline-block;
    cursor: pointer;
    margin-bottom: 10px;
  }
  .logo a {
    display:flex;
    align-items:center;
    justify-content:center;
    width:140px;
    height:44px;
    background: linear-gradient(135deg,#7dd3fc,#60a5fa);
    border-radius: var(--radius);
    color:#022;
    font-weight:700;
    text-decoration:none;
  }
  h1 {
    margin: 0;
    font-size: 1.5rem;
  }
  .timeline {
    max-width: 650px;
    margin: 30px auto;
    position: relative;
    padding-left: 40px;
  }
  .timeline::before {
    content: "";
    position: absolute;
    left: 15px;
    top: 0;
    bottom: 0;
    width: 2px;
    background: var(--accent-2);
  }
  .step {
    background: var(--card);
    border-radius: var(--radius);
    padding: 15px 20px;
    margin: 20px 0;
    position: relative;
    box-shadow: 0 0 10px #0003;
  }
  .step h2 {
    font-size: 1.1rem;
    margin: 0 0 10px;
  }
  .step ol { 
    margin: 0; 
    padding-left: 20px; 
  }
  .modal {
    display: flex;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.85);
    justify-content: center;
    align-items: center;
    z-index: 999;
  }
  .modal-content {
    background: var(--card);
    padding: 25px;
    border-radius: var(--radius);
    width: 90%;
    max-width: 400px;
    text-align: center;
  }
  select, button {
    width: 100%;
    padding: 10px;
    margin-top: 15px;
    border-radius: 8px;
    border: none;
    background: var(--accent);
    color: #001018;
    font-weight: bold;
    cursor: pointer;
  }
  select { background: #21262d; color: var(--text); }
  select:focus, button:hover { outline: 2px solid var(--accent-2); }
</style>
</head>
<body>

<header>
  <div class="logo">
    <a href="#">WebNTek</a>
  </div>
  <h1 id="guide-title">Device Setup Guide</h1>
</header>

<div class="timeline" id="timeline"></div>

<!-- Device Modal -->
<div class="modal" id="device-modal">
  <div class="modal-content">
    <h2>Select Device</h2>
    <select id="device-select">
      <option value="">-- Choose Device --</option>
      <option value="firestick">Firestick</option>
      <option value="android">Android</option>
      <option value="ios">iOS (iPhone, iPad or Apple TV)</option>
      <option value="infomir">Infomir Mag</option>
      <option value="formuler">Formuler</option>
      <option value="buzz">Buzz TV</option>
      <option value="other">Other</option>
    </select>
    <button id="device-confirm">Next</button>
  </div>
</div>

<!-- App Modal -->
<div class="modal" id="app-modal" style="display:none;">
  <div class="modal-content">
    <h2>Select App</h2>
    <select id="app-select"></select>
    <button id="app-back">Back</button>
    <button id="app-confirm">Next</button>
  </div>
</div>

<!-- Provider Modal -->
<div class="modal" id="provider-modal" style="display:none;">
  <div class="modal-content">
    <h2 id="provider-title">Select Service Provider</h2>
    <select id="provider-select"></select>
    <button id="provider-back">Back</button>
    <button id="provider-confirm">Start Guide</button>
  </div>
</div>

<script>
  // Prevent right-click, copy, inspect
  document.addEventListener('contextmenu', e => e.preventDefault());
  document.addEventListener('keydown', e => {
    if (e.ctrlKey && ['u','U','s','S','c','C'].includes(e.key)) e.preventDefault();
    if (e.key === 'F12') e.preventDefault();
  });

  let selectedDevice = "";
  let selectedApp = "";
  let portalURL = "";

  const deviceApps = {
    firestick: ["stbemu","tivimate"],
    android: [],
    ios: [],
    infomir: [],
    formuler: [],
    buzz: [],
    other: []
  };

  const providerList = [
    {name:"Glotv", url:"https://glotv.me"},
    {name:"Gold/Global", url:"https://p1.airce.io"},
    {name:"Smart4K", url:"https://smart4k.me"},
    {name:"Sky", url:"http://sky.dittotvv.cc"},
    {name:"Stream4K", url:"https://tv.stream4k.cc"}
  ];

  const commonSteps = [
    {title:'Access Developer Options', content:`<ol>
      <li>Settings → My Fire TV → About</li>
      <li>Click device name until "You are now a developer"</li>
    </ol>`},
    {title:'Allow Apps from Unknown Sources', content:`<ol>
      <li>Settings → Device / My Fire TV → Developer Options</li>
      <li>Toggle "Apps from Unknown Sources" on → confirm</li>
    </ol>`}
  ];

  const appSteps = {
    stbemu:[
      {title:'Download STBEmu App', content:`<ol>
        <li>Open My Apps → Launch Downloader</li>
        <li>Enter code 9386189 or URL <a href="https://bit.ly/websmpro" target="_blank">https://bit.ly/websmpro</a></li>
        <li>Go → Install → Done → Delete APK</li>
      </ol>`},
      {title:'Configure STBEmu', content:`<ol>
        <li>Open STBEmu App → Menu → Settings → Profiles → New Profile → Name it</li>
        <li>Enter Portal URL: <a href="#" class="portal-link" target="_blank">portal will appear here</a></li>
        <li>Set STB Model: MAG 254 → Resolution: Auto</li>
        <li>Note MAC Address <span style="color:#f87171;font-weight:700;"><u>and send it to us</u></span></li>
        <li>Save → Exit → Launch → Select Profile → Start Streaming</li>
      </ol>`}
    ],
    tivimate:[
      {title:'Download TiviMate App', content:`<ol>
        <li>Open My Apps → Launch Downloader</li>
        <li>Enter code 3295550 or URL <a href="https://bit.ly/webtmate" target="_blank">https://bit.ly/webtmate</a></li>
        <li>Go → Install → Done → Delete APK</li>
      </ol>`},
      {title:'Configure TiviMate', content:`<ol>
        <li>Open TiviMate → Menu → Settings → Add Playlist → Stalker Portal</li>
        <li>Enter Portal URL: <a href="#" class="portal-link" target="_blank">portal will appear here</a></li>
        <li>Provide MAC Address <span style="color:#f87171;font-weight:700;"><u>and send it to us</u></span></li>
        <li>Click Next → Done</li>
      </ol>
      <p style="color:var(--accent-2); font-style:italic;">Note: Requires TiviMate Premium → <a href="https://tivimate.com" target="_blank">Upgrade</a></p>`}
    ]
  };

  function renderSteps(app){
    document.getElementById("guide-title").textContent = `Guide to setup ${app === "tivimate" ? "TiviMate" : "STBEmu"} on Firestick`;
    const timeline = document.getElementById("timeline");
    timeline.innerHTML = "";
    const steps = [...commonSteps, ...appSteps[app]];

    steps.forEach(s=>{
      const stepDiv = document.createElement("div");
      stepDiv.className = "step";
      let content = s.content;
      if(portalURL){
        content = content.replace(
          /<a href="#" class="portal-link" target="_blank">.*?<\/a>/g,
          `<a href="${portalURL}" class="portal-link" target="_blank">${portalURL}</a>`
        );
      }
      stepDiv.innerHTML = `<h2>${s.title}</h2>${content}`;
      timeline.appendChild(stepDiv);
    });
  }

  // Device selection
  document.getElementById('device-confirm').addEventListener('click',()=>{
    selectedDevice = document.getElementById('device-select').value;
    if(!selectedDevice){ alert("Please select a device"); return; }
    document.getElementById('device-modal').style.display='none';

    const apps = deviceApps[selectedDevice];
    const appSelect = document.getElementById('app-select');
    appSelect.innerHTML = '';
    if(apps.length){
      apps.forEach(a=>{
        const opt = document.createElement('option');
        opt.value = a;
        opt.textContent = a === 'stbemu' ? 'STBEmu (Free)' : 'TiviMate (Premium)';
        appSelect.appendChild(opt);
      });
      document.getElementById('app-modal').style.display='flex';
    } else {
      const timeline = document.getElementById('timeline');
      timeline.innerHTML = `<div class="step"><h2>Setup guide for this device will be available soon</h2></div>`;
    }
  });

  document.getElementById('app-back').addEventListener('click',()=>{
    document.getElementById('app-modal').style.display='none';
    document.getElementById('device-modal').style.display='flex';
  });

  // App selection
  document.getElementById('app-confirm').addEventListener('click',()=>{
    selectedApp = document.getElementById('app-select').value;
    if(!selectedApp){ alert("Please select an app"); return; }
    document.getElementById('app-modal').style.display='none';

    // Populate providers dynamically
    const providerSelect = document.getElementById('provider-select');
    providerSelect.innerHTML = '<option value="">-- Choose Provider --</option>';
    providerList.forEach(p=>{
      const opt = document.createElement('option');
      opt.value = p.url;
      opt.textContent = p.name;
      providerSelect.appendChild(opt);
    });

    document.getElementById('provider-title').textContent = "Select Service Provider";
    document.getElementById('provider-modal').style.display='flex';
  });

  document.getElementById('provider-back').addEventListener('click',()=>{
    document.getElementById('provider-modal').style.display='none';
    document.getElementById('app-modal').style.display='flex';
  });

  // Provider selection
  document.getElementById('provider-confirm').addEventListener('click',()=>{
    const providerVal = document.getElementById('provider-select').value;
    if(!providerVal){ alert("Please select a provider"); return; }
    portalURL = providerVal;
    document.getElementById('provider-modal').style.display='none';
    renderSteps(selectedApp);
  });

</script>

</body>
</html>
